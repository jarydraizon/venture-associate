(this["webpackJsonpventure-associate"]=this["webpackJsonpventure-associate"]||[]).push([[0],{14:function(e,t,a){},17:function(e,t,a){e.exports=a(27)},27:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(15),c=a(3),o=a(8);const u=Object(n.createContext)(null),m=e=>{let{children:t}=e;const[a,r]=Object(n.useState)(()=>{const e=localStorage.getItem("token")?{email:localStorage.getItem("userEmail")}:null;return console.log("Initial user state:",e),e}),[c,o]=Object(n.useState)(null);return l.a.createElement(u.Provider,{value:{user:a,error:c,login:async e=>{try{const a=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),n=await a.json();if(!a.ok)throw new Error(n.error||"Login failed");if(!n.token)throw new Error("Invalid login response");{var t;const a={email:e.email,user_id:n.user_id||(null===(t=n.user)||void 0===t?void 0:t.user_id)};localStorage.setItem("token",n.token),localStorage.setItem("userEmail",e.email),r(a)}return n}catch(a){throw o(a.message),new Error(a.message)}},signup:async e=>{try{const t=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await t.json();if(!t.ok)throw new Error(a.error||"Signup failed");return r(a.user),localStorage.setItem("token",a.token),a}catch(t){throw o(t.message),new Error(t.message)}},logout:()=>{localStorage.removeItem("token"),r(null),o(null)}}},t)},s=()=>Object(n.useContext)(u);var i=()=>{const e=Object(c.q)(),{user:t,logout:a}=s(),n=Object(c.o)();return l.a.createElement("nav",{className:"sidebar"},l.a.createElement("div",{className:"sidebar-content"},l.a.createElement("div",{className:"sidebar-top"},l.a.createElement("div",{className:"logo"},"boola"),l.a.createElement("div",{className:"nav-links"},l.a.createElement("button",{className:"nav-link ".concat("/ventures"===n.pathname?"active":""),onClick:()=>e("/ventures")},"Ventures"),l.a.createElement("button",{className:"nav-link ".concat("/insights"===n.pathname?"active":""),onClick:()=>e("/insights")},"Insights"))),l.a.createElement("div",{className:"sidebar-bottom"},t&&l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{className:"user-email"},t.email),l.a.createElement("button",{className:"sign-out-btn",onClick:a},"Sign Out")))))};var d=e=>{let{onSubmit:t,isLogin:a}=e;const[r,c]=Object(n.useState)(""),[o,u]=Object(n.useState)(""),[m,s]=Object(n.useState)("");return l.a.createElement("form",{onSubmit:async e=>{e.preventDefault(),s("");try{await t({email:r,password:o})}catch(a){s(a.message)}},className:"auth-form"},l.a.createElement("input",{type:"email",value:r,onChange:e=>c(e.target.value),placeholder:"Email",required:!0}),l.a.createElement("input",{type:"password",value:o,onChange:e=>u(e.target.value),placeholder:"Password",required:!0}),m&&l.a.createElement("div",{className:"error-message"},m),l.a.createElement("button",{type:"submit"},a?"Sign In":"Sign Up"))},E=a(28);var p=()=>{console.log("VentureForm rendered");const[e,t]=Object(n.useState)(""),[a,r]=Object(n.useState)(""),[c,o]=Object(n.useState)("");return l.a.createElement("div",null,l.a.createElement("h2",null,"Add a Venture"),l.a.createElement("form",{onSubmit:async n=>{n.preventDefault();const l=localStorage.getItem("token");console.log("Token payload:",JSON.parse(atob(l.split(".")[1])));try{const n=await E.a.post("/api/ventures",{name:e,description:a},{headers:{Authorization:"Bearer ".concat(l)}});o("Venture created successfully! (ID: ".concat(n.data.ventureId,")")),t(""),r("")}catch(c){o("Error: ".concat(c.response.data.error))}}},l.a.createElement("input",{type:"text",placeholder:"Venture Name",value:e,onChange:e=>t(e.target.value),required:!0}),l.a.createElement("textarea",{placeholder:"Description",value:a,onChange:e=>r(e.target.value),required:!0}),l.a.createElement("button",{type:"submit"},"Submit")),c&&l.a.createElement("p",null,c))},b=a(5);var h=e=>{let{isOpen:t,onClose:a,title:n,children:r}=e;return t?l.a.createElement("div",{className:"modal-overlay"},l.a.createElement("div",{className:"modal-content"},l.a.createElement("div",{className:"modal-header"},l.a.createElement("h2",null,n),l.a.createElement("button",{onClick:a,className:"modal-close"},"\xd7")),l.a.createElement("div",{className:"modal-body"},r))):null};var v=()=>{const[e,t]=Object(n.useState)([]),[a,r]=Object(n.useState)([]),[c,o]=Object(n.useState)([]),[u,m]=Object(n.useState)([]),[s,i]=Object(n.useState)([]),[d,p]=Object(n.useState)(""),[v,g]=Object(n.useState)(null),[y,N]=Object(n.useState)({}),S=async()=>{try{const e=localStorage.getItem("token");if(!e)return void p("No authentication token found");const a={Authorization:"Bearer ".concat(e)};console.log("Fetching data with token:",e);const[n,l,c,u,s]=await Promise.all([E.a.get("/api/ventures",{headers:a}),E.a.get("/api/ventures/files",{headers:a}),E.a.get("/api/ventures/web-urls",{headers:a}),E.a.get("/api/ventures/youtube-urls",{headers:a}),E.a.get("/api/ventures/other-companies",{headers:a})]);t(n.data.ventures||[]),r(l.data.files||[]),o(c.data.webUrls||[]),m(u.data.youtubeUrls||[]),i(s.data.companies||[])}catch(d){var e,a;console.error("Error fetching data:",d.response||d),p((null===(e=d.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.error)||"Failed to fetch data")}};Object(n.useEffect)(()=>{S()},[]);const f=async e=>{e.preventDefault();const t=localStorage.getItem("token"),a={Authorization:"Bearer ".concat(t)};try{switch(v){case"file":await E.a.post("/api/ventures/files",y,{headers:a});break;case"webUrl":await E.a.post("/api/ventures/web-urls",y,{headers:a});break;case"youtubeUrl":await E.a.post("/api/ventures/youtube-urls",y,{headers:a});break;case"company":await E.a.post("/api/ventures/other-companies",y,{headers:a});break;default:return}S(),g(null),N({})}catch(d){var n,l;p((null===(n=d.response)||void 0===n||null===(l=n.data)||void 0===l?void 0:l.error)||"Failed to add item")}};return l.a.createElement("div",{className:"venture-list"},l.a.createElement("h2",null,"Your Ventures"),d&&l.a.createElement("p",{className:"error"},d),l.a.createElement("h3",null,"Files"),l.a.createElement("button",{className:"add-button",onClick:()=>g("file")},"Add New File"),l.a.createElement("div",{className:"table-container"},l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"URL"),l.a.createElement("th",null,"Created At"))),l.a.createElement("tbody",null,a.map(e=>l.a.createElement("tr",{key:e.file_id},l.a.createElement("td",null,e.name),l.a.createElement("td",null,l.a.createElement("a",{href:e.url,target:"_blank",rel:"noopener noreferrer"},e.url)),l.a.createElement("td",null,new Date(e.created_at).toLocaleDateString())))))),l.a.createElement("h3",null,"Web URLs"),l.a.createElement("button",{className:"add-button",onClick:()=>g("webUrl")},"Add New Web URL"),l.a.createElement("div",{className:"table-container"},l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"URL"),l.a.createElement("th",null,"Created At"))),l.a.createElement("tbody",null,c.map(e=>l.a.createElement("tr",{key:e.url_id},l.a.createElement("td",null,e.name),l.a.createElement("td",null,l.a.createElement("a",{href:e.url,target:"_blank",rel:"noopener noreferrer"},e.url)),l.a.createElement("td",null,new Date(e.created_at).toLocaleDateString())))))),l.a.createElement("h3",null,"YouTube URLs"),l.a.createElement("button",{className:"add-button",onClick:()=>g("youtubeUrl")},"Add New YouTube URL"),l.a.createElement("div",{className:"table-container"},l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"URL"),l.a.createElement("th",null,"Created At"))),l.a.createElement("tbody",null,u.map(e=>l.a.createElement("tr",{key:e.youtube_id},l.a.createElement("td",null,e.name),l.a.createElement("td",null,l.a.createElement("a",{href:e.url,target:"_blank",rel:"noopener noreferrer"},e.url)),l.a.createElement("td",null,new Date(e.created_at).toLocaleDateString())))))),l.a.createElement("h3",null,"Related Companies"),l.a.createElement("button",{className:"add-button",onClick:()=>g("company")},"Add New Company"),l.a.createElement("div",{className:"table-container"},l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Type"),l.a.createElement("th",null,"Created At"))),l.a.createElement("tbody",null,s.map(e=>l.a.createElement("tr",{key:e.company_id},l.a.createElement("td",null,e.name),l.a.createElement("td",null,e.type),l.a.createElement("td",null,new Date(e.created_at).toLocaleDateString())))))),l.a.createElement(h,{isOpen:"file"===v,onClose:()=>g(null),title:"Add New File"},l.a.createElement("form",{onSubmit:f,className:"modal-form"},l.a.createElement("input",{type:"text",placeholder:"File Name",value:y.name||"",onChange:e=>N(Object(b.a)(Object(b.a)({},y),{},{name:e.target.value})),required:!0}),l.a.createElement("input",{type:"url",placeholder:"File URL",value:y.url||"",onChange:e=>N(Object(b.a)(Object(b.a)({},y),{},{url:e.target.value})),required:!0}),l.a.createElement("button",{type:"submit"},"Add File"))),l.a.createElement(h,{isOpen:"webUrl"===v,onClose:()=>g(null),title:"Add New Web URL"},l.a.createElement("form",{onSubmit:f,className:"modal-form"},l.a.createElement("input",{type:"text",placeholder:"URL Name",value:y.name||"",onChange:e=>N(Object(b.a)(Object(b.a)({},y),{},{name:e.target.value})),required:!0}),l.a.createElement("input",{type:"url",placeholder:"Web URL",value:y.url||"",onChange:e=>N(Object(b.a)(Object(b.a)({},y),{},{url:e.target.value})),required:!0}),l.a.createElement("button",{type:"submit"},"Add Web URL"))),l.a.createElement(h,{isOpen:"youtubeUrl"===v,onClose:()=>g(null),title:"Add New YouTube URL"},l.a.createElement("form",{onSubmit:f,className:"modal-form"},l.a.createElement("input",{type:"text",placeholder:"Video Name",value:y.name||"",onChange:e=>N(Object(b.a)(Object(b.a)({},y),{},{name:e.target.value})),required:!0}),l.a.createElement("input",{type:"url",placeholder:"YouTube URL",value:y.url||"",onChange:e=>N(Object(b.a)(Object(b.a)({},y),{},{url:e.target.value})),required:!0}),l.a.createElement("button",{type:"submit"},"Add YouTube URL"))),l.a.createElement(h,{isOpen:"company"===v,onClose:()=>g(null),title:"Add Related Company"},l.a.createElement("form",{onSubmit:f,className:"modal-form"},l.a.createElement("input",{type:"text",placeholder:"Company Name",value:y.name||"",onChange:e=>N(Object(b.a)(Object(b.a)({},y),{},{name:e.target.value})),required:!0}),l.a.createElement("input",{type:"text",placeholder:"Company Type",value:y.type||"",onChange:e=>N(Object(b.a)(Object(b.a)({},y),{},{type:e.target.value})),required:!0}),l.a.createElement("button",{type:"submit"},"Add Company"))))};var g=()=>l.a.createElement("div",{className:"ventures-page"},l.a.createElement(p,null),l.a.createElement(v,null));var y=function(){return l.a.createElement("div",{className:"main-content"},l.a.createElement("h1",null,"Insights"),l.a.createElement("p",null,"Coming soon..."))};var N=()=>{const e=Object(c.q)();return l.a.createElement("div",{className:"home-page"},l.a.createElement("div",{className:"hero-section"},l.a.createElement("h1",null,"Your AI Venture Associate"),l.a.createElement("h2",null,"Make better investment decisions with AI-powered insights"),l.a.createElement("button",{className:"cta-button",onClick:()=>e("/login")},"Get Started")))};a(14);function S(e){let{children:t}=e;const{user:a}=s();return a?t:l.a.createElement(c.a,{to:"/"})}function f(){const{user:e,login:t,signup:a}=s(),[n,r]=l.a.useState(!0);return l.a.createElement("div",{className:"app-container"},e&&l.a.createElement(i,null),l.a.createElement("div",{className:"main-content"},l.a.createElement(c.d,null,l.a.createElement(c.b,{path:"/ventures",element:l.a.createElement(S,null,l.a.createElement(g,null))}),l.a.createElement(c.b,{path:"/insights",element:l.a.createElement(S,null,l.a.createElement(y,null))}),l.a.createElement(c.b,{path:"/",element:e?l.a.createElement(c.a,{to:"/ventures"}):l.a.createElement(N,null)}),l.a.createElement(c.b,{path:"/login",element:e?l.a.createElement(c.a,{to:"/ventures"}):l.a.createElement("div",{className:"auth-container"},l.a.createElement("h1",null,n?"Sign In":"Sign Up"),l.a.createElement(d,{onSubmit:n?t:a,isLogin:n}),l.a.createElement("button",{className:"switch-auth",onClick:()=>r(!n)},n?"Need an account? Sign up":"Have an account? Sign in"))}))))}var O=function(){return l.a.createElement(m,null,l.a.createElement(o.a,null,l.a.createElement(f,null)))};const w=document.getElementById("root");Object(r.createRoot)(w).render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(O,null)))}},[[17,1,2]]]);
//# sourceMappingURL=main.5f46bf3e.chunk.js.map